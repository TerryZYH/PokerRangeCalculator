# 用户使用手册

## 📖 目录

- [快速开始](#快速开始)
- [基础操作](#基础操作)
- [高级功能](#高级功能)
- [概率计算原理](#概率计算原理)
- [常见问题](#常见问题)

---

## 🚀 快速开始

### 安装依赖

```bash
# 如果遇到权限问题，先修复 npm 缓存
sudo chown -R $(whoami) ~/.npm

# 安装依赖
npm install
```

### 启动应用

```bash
# 启动开发服务器
npm run dev
```

应用将在 http://localhost:3000 启动

### 首次使用

1. 打开浏览器访问 http://localhost:3000
2. 查看欢迎引导（介绍核心功能）
3. 选择一个预设范围开始探索
4. 点击或滑动矩阵选择手牌
5. 查看实时概率计算

---

## 📱 基础操作

### 1. 选择范围

**预设范围**（12个）：
- UTG Open (15-20%)
- HJ Open (20-25%)
- CO Open (25-30%)
- BTN Open (40-50%)
- SB Open (35-45%)
- BB vs BTN Open (30-40%)
- CO 3-Bet vs HJ (8-12%)
- BTN Call 3-Bet (15-20%)
- 4-Bet 范围 (4-6%)
- Call 4-Bet (2-3%)
- Flop Check Range
- Flop C-Bet Range

**操作**：
- 在左侧"范围管理"面板点击任意范围
- 收藏的范围会自动置顶显示

### 2. 选择手牌

#### 单点选择
- 点击矩阵中的任意手牌格子
- 再次点击取消选中

#### 滑动多选
- **桌面端**：按住鼠标拖动
- **移动端**：手指滑动
- 首次点击决定是"选择"还是"取消"模式

#### 手牌类型
```
对角线（灰色底）：对子
  AA, KK, QQ, JJ... 22

右上三角（蓝色底）：同色 (s)
  AKs, AQs, KQs...

左下三角（绿色底）：不同色 (o)
  AKo, AQo, KQo...
```

### 3. 查看概率

**显示内容**：
- **已选手牌类型**：10 种类型 / 169
- **实际组合数**：68 种组合 / 1326
- **出现概率**：5.13%

**说明**：
- 对子每种有 6 个组合
- 同色每种有 4 个组合
- 不同色每种有 12 个组合

---

## 🎯 高级功能

### 自定义范围

#### 创建新范围
1. 点击左上角 [➕] 按钮
2. 输入范围名称（唯一、不为空）
3. 点击"创建"
4. 开始选择手牌

#### 编辑范围
1. 点击范围旁的 [✏️] 按钮
2. 修改名称
3. 点击"保存"

#### 删除范围
1. 点击范围旁的 [🗑️] 按钮
2. 确认删除（预设范围不可删除）

### 收藏功能

**收藏范围**：
- 点击范围旁的 [⭐] 图标
- 收藏的范围自动置顶

**取消收藏**：
- 再次点击星标图标

### 批量操作

**全局操作**：
- **全选**：选中所有 169 种手牌
- **清空**：取消所有选择
- **反选**：选中变未选中，未选中变选中

**按类型操作**：
- **所有对子**：选择/取消所有对子 (13种)
- **所有同色**：选择/取消所有同色牌 (78种)
- **所有不同色**：选择/取消所有不同色牌 (78种)

### 数据管理

#### 导出范围
1. 点击 [📤] 按钮
2. 下载 JSON 文件
3. 包含所有自定义范围和收藏

#### 导入范围
1. 点击 [📥] 按钮
2. 选择 JSON 文件
3. 自动导入所有范围

#### 重置预设范围
1. 点击 [🔄] 按钮
2. 确认操作
3. 所有预设范围恢复初始状态
4. **自定义范围不受影响**
5. **收藏状态自动保留**

---

## 📊 概率计算原理

### 基本概念

德州扑克总手牌组合数 = **1,326 种**

每种手牌**类型**包含多个**具体组合**：

| 手牌类型 | 组合数 | 计算公式 | 示例 |
|---------|--------|---------|------|
| 对子 | 6 | C(4,2) | AA 有 6 种花色组合 |
| 同色 | 4 | 4 种花色 | AKs 有 4 种 |
| 不同色 | 12 | 4×3 | AKo 有 12 种 |

### 计算公式

```
出现概率 = 实际组合数 ÷ 1326 × 100%
```

### 计算示例

#### 示例 1：只选择 AA
```
AA 的组合数 = 6
概率 = 6 / 1326 × 100% = 0.45%
意味着：每 221 手牌约拿到 1 次 AA
```

#### 示例 2：选择 AA + KK
```
AA 的组合数 = 6
KK 的组合数 = 6
总组合数 = 12

概率 = 12 / 1326 × 100% = 0.90%
意味着：每 110 手牌约拿到 1 次 AA 或 KK
```

#### 示例 3：选择 AA + KK + AKs + AKo
```
AA:   6 组合
KK:   6 组合
AKs:  4 组合
AKo: 12 组合
总计: 28 组合

概率 = 28 / 1326 × 100% = 2.11%
意味着：每 47 手牌约拿到 1 次这些牌
```

#### 示例 4：选择所有对子
```
对子组合数 = 13 × 6 = 78

概率 = 78 / 1326 × 100% = 5.88%
意味着：每 17 手牌约拿到 1 次对子
```

### 验证总数

```
对子:     13 × 6  = 78 种组合
同色:     78 × 4  = 312 种组合
不同色:   78 × 12 = 936 种组合
─────────────────────────────
总计:              1326 种组合 ✓
```

### 为什么这很重要？

**错误方法** ❌：
```
选中 10 种手牌类型
错误概率 = 10 / 169 × 100% = 5.92%
```

**正确方法** ✅：
```
选中 10 种手牌类型
实际组合数 = 68（根据具体类型）
正确概率 = 68 / 1326 × 100% = 5.13%
```

不同类型组合数不同，必须准确计算！

---

## ❓ 常见问题

### 安装与启动

**Q: npm install 失败？**

A: 尝试以下方案：
```bash
# 方案 1：修复权限
sudo chown -R $(whoami) ~/.npm
npm install

# 方案 2：使用临时缓存
npm install --cache /tmp/.npm-cache

# 方案 3：使用 yarn
yarn install
```

**Q: 端口 3000 被占用？**

A: 修改 `vite.config.ts` 中的端口：
```typescript
server: {
  port: 3001  // 改为其他端口
}
```

### 数据相关

**Q: 数据会丢失吗？**

A: 
- 数据存储在浏览器 LocalStorage
- 清除浏览器数据会导致丢失
- **建议定期导出备份**

**Q: 如何备份数据？**

A:
1. 点击 [📤] 导出按钮
2. 保存 JSON 文件
3. 需要时点击 [📥] 导入

**Q: 可以跨设备使用吗？**

A: 
- 当前版本数据在本地
- 可以通过导出/导入在设备间转移
- 未来可能支持云端同步

### 功能使用

**Q: 预设范围可以删除吗？**

A: 不可以，但可以：
- 创建自定义范围代替
- 使用重置功能恢复初始状态

**Q: 重置预设范围会影响自定义范围吗？**

A: 不会！
- 只重置预设范围
- 自定义范围完全不受影响
- 收藏状态也会保留

**Q: 支持哪些浏览器？**

A:
- Chrome/Firefox/Safari/Edge 最新版本
- 移动端：iOS Safari、Android Chrome
- 建议使用最新版浏览器

**Q: 可以离线使用吗？**

A: 可以！
- 访问过一次后会缓存资源
- 刷新页面可以离线使用
- 未来会添加 PWA 支持

### 概率计算

**Q: 为什么我的概率和预期不一样？**

A: 检查：
- 是否理解组合数概念
- 对子有 6 种组合
- 同色有 4 种组合
- 不同色有 12 种组合

**Q: 如何快速创建紧凶范围？**

A:
1. 先选择所有对子（批量操作）
2. 取消小对子（22-66）
3. 添加 AK, AQ 同色和不同色
4. 保存为自定义范围

**Q: 如何验证范围概率？**

A: 使用公式验证：
```
手动计数 × 每种组合数 ÷ 1326
```

### 移动端

**Q: 移动端如何使用？**

A:
- 横屏使用体验更佳
- 支持触摸滑动选择
- 所有按钮适配触摸尺寸

**Q: 滑动选择不灵敏？**

A:
- 确保手指按住再滑动
- 避免快速滑动
- 尝试重新加载页面

---

## 💡 使用技巧

### 快速选择强牌
1. 批量选择"所有对子"
2. 取消小对子
3. 添加大牌同色和不同色

### 创建位置相关范围
- 参考预设范围的概率
- UTG: 15-20%
- BTN: 40-50%

### 学习标准策略
1. 查看预设范围
2. 理解不同位置的范围差异
3. 创建自己的调整版本

### 数据安全
- 每次大改前先导出备份
- 重要范围设为收藏
- 定期导出保存到云盘

---

## 🎓 进阶学习

### 理解范围平衡
- 价值牌（nuts）
- 诈唬牌（bluffs）
- 比例（通常 2:1 或 3:1）

### 位置与范围
- 越后面位置越宽
- 考虑对手倾向
- 动态调整

### 实战应用
1. 在应用中创建理论范围
2. 记录实战使用情况
3. 根据结果优化调整

---

**祝您使用愉快，提升德州扑克水平！** 🃏♠️♥️♦️♣️

